!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,n){e(this,"_pressLike",(e=>{e.target.classList.toggle("card__like_active")})),e(this,"_pressDelete",(()=>{this._element.remove(),this._element=null})),this._title=t.title,this._link=t.link,this._cardSelector=s,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".grid__card").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return e.style.backgroundImage="url(".concat(this._link,")"),t.textContent=this._title,this._element}_setEventListeners(){this._element.querySelector(".card__like").addEventListener("click",this._pressLike),this._element.querySelector(".card__delete").addEventListener("click",this._pressDelete),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick()}))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n=class{constructor(e,t){s(this,"_showInputError",((e,t)=>{const s=this._element.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),s(this,"_hideInputError",(e=>{const t=this._element.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._inputErrorClass),t.textContent=""})),s(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),s(this,"_toggleButtonState",(()=>{this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)})),this._inputSelector=e.inputSelector,this._fieldsetSelector=e.fieldsetSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t,this._inputList=Array.from(t.querySelectorAll(this._inputSelector)),this._buttonElement=t.querySelector(this._submitButtonSelector)}resetValidationError(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}};class r{constructor(e){var t,s;s=e=>{e.target===e.currentTarget&&this.close(e.target)},(t="_handleLayoverClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=e,this._handleEscClose=this._handleEscClose.bind(this),this._handleLayoverClose=this._handleLayoverClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_enabled"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleLayoverClose)}close(){this._popupElement.classList.remove("popup_enabled"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleLayoverClose)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup__close")&&this.close()}))}}class i extends r{constructor(e,t){super(e),this._handleFormSubmit=t,this._formElement=this._popupElement.querySelector(".popup__form"),this._inputList=this._formElement.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{const s=t.id,n=t.value;e[s]=n})),e}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._formElement.reset()}}const o=(e,t)=>{fetch(e,t).then((e=>{if(e.ok)return e.json();Promise.reject("Error: ".concat(e.status))}))};document.querySelector(".profile__name"),document.querySelector(".profile__category");const l=document.querySelector(".image"),a=(document.getElementById("title"),document.getElementById("link"),document.querySelector(".grid__cards"),document.querySelector(".profile__edit-button")),c=(document.querySelector(".edit__close"),document.querySelector(".edit")),u=(document.getElementById("editForm"),document.querySelector("#edit")),d=document.querySelector("#add"),_=document.getElementById("name"),h=document.getElementById("category"),m=document.querySelector(".profile__add-button"),p=(document.querySelector(".add__close"),document.querySelector(".add")),E=(document.getElementById("addForm"),document.querySelector(".form__button"),{formSelector:".form",inputSelector:".form__input",fieldsetSelector:".form__fieldset",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}),y=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return o("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return o("".concat(this._baseUrl,"/me"),{headers:this._headers})}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"b451294b-44d9-464a-8874-2d4137a4eb3c","Content-Type":"application/json"}});let g;y.getInitialCards().then((e=>{v.renderItems(e)})).catch((e=>{console.log(e)})),y.getUserInfo().then((e=>{g=e.id,S.setUserInfo(e.name,e.about)})).then((e=>{S.setUserImage(e.avatar)})).catch((e=>{console.log(e)}));const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.prepend(t)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}}({items:[{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){return new t(e,"#card",(()=>{L.open(e.title,e.link)})).generateCard()}},".grid__cards");v.renderItems();const f=new i(u,(e=>{S.setUserInfo(e.name,e.description),f.close()}));f.setEventListeners();const b=new i(d,(e=>{const t={title:e.title,link:e.link};v.addItem(t),b.close()}));b.setEventListeners();const L=new class extends r{constructor(e){super(e),this._imageTitle=this._popupElement.querySelector(".image__title"),this._imagePreview=this._popupElement.querySelector(".image__file")}open(e,t){super.open(),this._imagePreview.src=t,this._imagePreview.alt=e,this._imageTitle.textContent=e}}(l);L.setEventListeners();const S=new class{constructor(e){let{fullName:t,category:s,profilePic:n}=e;this._fullName=document.querySelector(t),this._category=document.querySelector(s),this._profilePic=document.querySelector(n)}getUserInfo(){return{name:this._fullName.textContent,description:this._category.textContent,picture:this._profilePic.src}}setUserInfo(e,t){this._fullName.textContent=e,this._category.textContent=t}setUserImage(e){this._profilePic.src=e}}({fullName:".profile__name",category:".profile__category",profilePic:".profile__picture"});a.addEventListener("click",(function(){const e=S.getUserInfo();_.value=e.name,h.value=e.description,C.resetValidationError(),f.open()})),m.addEventListener("click",(()=>{I.resetValidationError(),b.open()}));const C=new n(E,c),I=new n(E,p);C.enableValidation(),I.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwRm9ybS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS50aXRsZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX2NhcmRcIik7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuXHJcbiAgICBjYXJkSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vbGlrZSBoYW5kbGVyXHJcbiAgICBjb25zdCBjYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3ByZXNzTGlrZSk7XHJcblxyXG4gICAgLy9kZWxldGUgaGFuZGxlclxyXG4gICAgY29uc3QgY2FyZERlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGVcIik7XHJcbiAgICBjYXJkRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9wcmVzc0RlbGV0ZSk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vX2hhbmRsZUNhcmRDbGljayA9ICgpID0+IHtcclxuICAgLy8gdGhpcy5Qb3B1cEltYWdlXHJcbiAvLyB9XHJcblxyXG4gIF9wcmVzc0xpa2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICB9O1xyXG5cclxuICBfcHJlc3NEZWxldGUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxufSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2ZpZWxkc2V0U2VsZWN0b3IgPSBjb25maWcuZmllbGRzZXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb25FcnJvcigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiZXhwb3J0IGNsYXNzIFBvcHVwe1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCl7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVMYXlvdmVyQ2xvc2UgPSB0aGlzLl9oYW5kbGVMYXlvdmVyQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxheW92ZXJDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKGV2dC50YXJnZXQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX2VuYWJsZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVMYXlvdmVyQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2VuYWJsZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVMYXlvdmVyQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgfSk7XHJcblxyXG5cclxufVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwRWxlbWVudCk7XHJcblxyXG5cclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgY29uc3Qga2V5ID0gaW5wdXQuaWQ7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIGlucHV0c1trZXldID0gdmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dHM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKVxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKVxyXG59XHJcblxyXG59IiwiY29uc3QgZmV0Y2hlciA9ICh1cmwsIGhlYWRlcikgPT4ge1xyXG4gICAgZmV0Y2godXJsLGhlYWRlcilcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9IFxyXG5cclxuICBleHBvcnQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBoZWFkZXJzfSl7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB9O1xyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoZXIoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2hlcihgJHt0aGlzLl9iYXNlVXJsfS9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG4iLCIvL2luaXRpYWwgaW1hZ2VzXHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuICBdO1xyXG4gIFxyXG4vL3Byb2ZpbGUgY29uc3RzXHJcblxyXG5leHBvcnQgY29uc3QgZnVsbE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBjYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fY2F0ZWdvcnlcIik7XHJcblxyXG4vL2ltYWdlIGNvbnN0c1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGxpbmtJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlua1wiKTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgY2FyZEdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX2NhcmRzXCIpO1xyXG5cclxuLy9wcm9maWxlIGZvcm0gY29uc3RzXHJcblxyXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjbG9zZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRfX2Nsb3NlXCIpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRGb3JtXCIpO1xyXG5cclxuLy9wb3B1cCBmb3JtIGNvbnN0c1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgYWRkUG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZCcpO1xyXG5cclxuLy9pbnB1dHNcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXRlZ29yeVwiKTtcclxuXHJcbi8vIGltYWdlIGZvcm0gY29uc3RzXHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjbG9zZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkX19jbG9zZVwiKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRGb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYnV0dG9uXCIpO1xyXG5cclxuLy92YWxpZGF0aW9uIGNvbnN0c1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgICBmaWVsZHNldFNlbGVjdG9yOiBcIi5mb3JtX19maWVsZHNldFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25faW5hY3RpdmVcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIH07IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cEZvcm0gfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwRm9ybS5qc1wiO1xyXG5cclxuaW1wb3J0IHsgUG9wdXBJbWFnZSB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBJbWFnZS5qc1wiO1xyXG5cclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZm9ybUNvbmZpZyxcclxuICBmb3JtQWRkLFxyXG4gIGZvcm1FZGl0LFxyXG4gIGFkZFBvcHVwRWxlbWVudCxcclxuICBhZGRGb3JtRWxlbWVudCxcclxuICBlZGl0Rm9ybUVsZW1lbnQsXHJcbiAgZWRpdFBvcHVwRWxlbWVudCxcclxuICBidXR0b25BZGQsXHJcbiAgYnV0dG9uRWRpdCxcclxuICBuYW1lSW5wdXQsXHJcbiAgam9iSW5wdXQsXHJcbiAgcG9wdXBJbWFnZSxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vaW5pdGlhbGl6aW5nIGFwaVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJiNDUxMjk0Yi00NGQ5LTQ2NGEtODg3NC0yZDQxMzdhNGViM2NcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgfVxyXG59KTtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG4vL2dldHRpbmcgaW5pdGlhbCBjYXJkc1xyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbi50aGVuKChyZXMpID0+IHtcclxuICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhyZXMpO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn0pXHJcblxyXG4vL2dldHRpbmcgdXNlciBpbmZvXHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKVxyXG4udGhlbigocmVzKSA9PiB7XHJcbiAgIHVzZXJJZCA9IHJlcy5pZFxyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCAgcmVzLmFib3V0KVxyXG59KVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbWFnZShyZXMuYXZhdGFyKVxyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSlcclxuXHJcblxyXG4vL3N1Ym1pdHRpbmcgY2FyZFxyXG5cclxuY29uc3Qgc3VibWl0Q2FyZCA9IChkYXRhKSA9PiB7XHJcblxyXG5jb25zdCBuZXdJbWFnZSA9IHtcclxuICB0aXRsZTogZGF0YVsndGl0bGUnXSxcclxuICBsaW5rOiBkYXRhWydsaW5rJ11cclxufTtcclxuY2FyZExpc3QuYWRkSXRlbShuZXdJbWFnZSk7XHJcblxyXG5jYXJkRm9ybS5jbG9zZSgpO1xyXG5cclxufVxyXG5cclxuLy9zdWJtaXR0aW5nIHByb2ZpbGVcclxuXHJcbmNvbnN0IHN1Ym1pdFByb2ZpbGUgPSAoZGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5kZXNjcmlwdGlvbilcclxuXHJcbiAgcHJvZmlsZUZvcm0uY2xvc2UoKVxyXG59XHJcblxyXG4vL2Rpc3BsYXlpbmcgY2FyZHMgaW4gZ2FsbGVyeVxyXG5cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuICBcIi5ncmlkX19jYXJkc1wiXHJcbik7XHJcblxyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy91c2VyIGluZm8gc2VjdGlvblxyXG5cclxuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBGb3JtKGVkaXRQb3B1cEVsZW1lbnQsIHN1Ym1pdFByb2ZpbGUpXHJcbnByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL2NhcmQgc2VjdGlvblxyXG5cclxuY29uc3QgY2FyZEZvcm0gPSBuZXcgUG9wdXBGb3JtKGFkZFBvcHVwRWxlbWVudCwgc3VibWl0Q2FyZClcclxuY2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vaW1hZ2Ugc2VjdGlvblxyXG5cclxuY29uc3QgaW1hZ2VNb2R1bGUgPSBuZXcgUG9wdXBJbWFnZShwb3B1cEltYWdlKTtcclxuaW1hZ2VNb2R1bGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG4vL2FkZGluZyBjYXJkIHRvIGdhbGxlcnlcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IGltYWdlID0gbmV3IENhcmQoY2FyZCwgXCIjY2FyZFwiLCAoKSA9PiB7XHJcbiAgICBpbWFnZU1vZHVsZS5vcGVuKGNhcmQudGl0bGUsIGNhcmQubGluayk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGltYWdlLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5cclxuLy9nZXR0aW5nIHRoZSBjdXJyZW50IHVzZXIgaW5mb1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIGZ1bGxOYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgY2F0ZWdvcnk6IFwiLnByb2ZpbGVfX2NhdGVnb3J5XCIsXHJcbiAgcHJvZmlsZVBpYzogXCIucHJvZmlsZV9fcGljdHVyZVwiXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyUHJvZmlsZSgpe1xyXG4gIGNvbnN0IHByb2ZpbGUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlLm5hbWVcclxuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGUuZGVzY3JpcHRpb247XHJcbiAgXHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uRXJyb3IoKTtcclxuICBwcm9maWxlRm9ybS5vcGVuKCk7XHJcbn1cclxuXHJcblxyXG4vL2hhbmRsZXJzXHJcblxyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW5kZXJQcm9maWxlKTtcclxuXHJcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uRXJyb3IoKTtcclxuICBjYXJkRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuXHJcbi8vdmFsaWRhdG9yIHNldHRpbmdzXHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1FZGl0KTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1BZGQpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sICBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIGluc2VydHMgZWxlbWVudCB0byB0aGUgY29udGFpbmVyXHJcbiAgYWRkSXRlbShkYXRhKSB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZGF0YSlcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgfTtcclxuXHJcbiAgLy8gcmVuZGVycyBpbml0aWFsIGl0ZW1zXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChkYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShkYXRhKVxyXG4gICAgfSlcclxuICB9O1xyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwSW1hZ2UgZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCl7XHJcbiAgICAgICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5faW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlX190aXRsZVwiKTtcclxuICAgICAgICB0aGlzLl9pbWFnZVByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZV9fZmlsZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKHRpdGxlLCBsaW5rKXtcclxuICAgIFxyXG4gICAgICAgIHN1cGVyLm9wZW4oKVxyXG4gICAgdGhpcy5faW1hZ2VQcmV2aWV3LnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZVByZXZpZXcuYWx0ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG4gXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBmdWxsTmFtZSwgY2F0ZWdvcnksIHByb2ZpbGVQaWMgfSkge1xyXG4gICAgICB0aGlzLl9mdWxsTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZnVsbE5hbWUpO1xyXG4gICAgICB0aGlzLl9jYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2F0ZWdvcnkpO1xyXG4gICAgICB0aGlzLl9wcm9maWxlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlUGljKTtcclxuICAgIH1cclxuICBcclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IHRoaXMuX2Z1bGxOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9jYXRlZ29yeS50ZXh0Q29udGVudCxcclxuICAgICAgICBwaWN0dXJlOiB0aGlzLl9wcm9maWxlUGljLnNyY1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcbiAgICBzZXRVc2VySW5mbyggbmFtZSwgZGVzY3JpcHRpb24gKSB7XHJcbiAgICAgIHRoaXMuX2Z1bGxOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgdGhpcy5fY2F0ZWdvcnkudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW1hZ2UocGljdHVyZSl7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVQaWMuc3JjID0gcGljdHVyZTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG4gICJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidGhpcyIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX3RpdGxlIiwidGl0bGUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9wcmVzc0xpa2UiLCJfcHJlc3NEZWxldGUiLCJjb25maWciLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZmllbGRzZXRTZWxlY3RvciIsImZpZWxkc2V0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc2V0VmFsaWRhdGlvbkVycm9yIiwiZm9yRWFjaCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlbmFibGVWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cEVsZW1lbnQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVMYXlvdmVyQ2xvc2UiLCJrZXkiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiY29udGFpbnMiLCJQb3B1cEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0IiwidmFsdWUiLCJlIiwic2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRzIiwibmFtZSIsInJlc2V0IiwiZmV0Y2hlciIsInVybCIsImhlYWRlciIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJwb3B1cEltYWdlIiwiYnV0dG9uRWRpdCIsImdldEVsZW1lbnRCeUlkIiwiZm9ybUVkaXQiLCJlZGl0UG9wdXBFbGVtZW50IiwiYWRkUG9wdXBFbGVtZW50IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJidXR0b25BZGQiLCJmb3JtQWRkIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJZCIsImNhcmRMaXN0IiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW1hZ2UiLCJhdmF0YXIiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsImltYWdlTW9kdWxlIiwicHJvZmlsZUZvcm0iLCJkZXNjcmlwdGlvbiIsImNhcmRGb3JtIiwibmV3SW1hZ2UiLCJfaW1hZ2VUaXRsZSIsIl9pbWFnZVByZXZpZXciLCJzcmMiLCJhbHQiLCJmdWxsTmFtZSIsImNhdGVnb3J5IiwicHJvZmlsZVBpYyIsIl9mdWxsTmFtZSIsIl9jYXRlZ29yeSIsIl9wcm9maWxlUGljIiwicGljdHVyZSIsInByb2ZpbGUiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==