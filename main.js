!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,n){e(this,"_pressLike",(e=>{e.target.classList.toggle("card__like_active")})),e(this,"_pressDelete",(()=>{this._element.remove(),this._element=null})),this._title=t.title,this._link=t.link,this._cardSelector=s,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".grid__card").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return e.style.backgroundImage="url(".concat(this._link,")"),t.textContent=this._title,this._element}_setEventListeners(){this._element.querySelector(".card__like").addEventListener("click",this._pressLike),this._element.querySelector(".card__delete").addEventListener("click",this._pressDelete),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick()}))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n=class{constructor(e,t){s(this,"_showInputError",((e,t)=>{const s=this._element.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),s(this,"_hideInputError",(e=>{const t=this._element.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._inputErrorClass),t.textContent=""})),s(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),s(this,"_toggleButtonState",(()=>{this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)})),this._inputSelector=e.inputSelector,this._fieldsetSelector=e.fieldsetSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t,this._inputList=Array.from(t.querySelectorAll(this._inputSelector)),this._buttonElement=t.querySelector(this._submitButtonSelector)}resetValidationError(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}};class r{constructor(e){var t,s;s=e=>{e.target===e.currentTarget&&this.close(e.target)},(t="_handleLayoverClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=e,this._handleEscClose=this._handleEscClose.bind(this),this._handleLayoverClose=this._handleLayoverClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_enabled"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleLayoverClose)}close(){this._popupElement.classList.remove("popup_enabled"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleLayoverClose)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup__close")&&this.close()}))}}class i extends r{constructor(e,t){super(e),this._handleFormSubmit=t,this._formElement=this._popupElement.querySelector(".popup__form"),this._inputList=this._formElement.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{const s=t.id,n=t.value;e[s]=n})),e}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._formElement.reset()}}const o=(e,t)=>{fetch(e,t).then((e=>{if(e.ok)return e.json();Promise.reject("Error: ".concat(e.status))}))};document.querySelector(".profile__name"),document.querySelector(".profile__category");const l=document.querySelector(".image"),a=(document.getElementById("title"),document.getElementById("link"),document.querySelector(".grid__cards"),document.querySelector(".profile__edit-button")),c=(document.querySelector(".edit__close"),document.querySelector(".edit")),u=(document.getElementById("editForm"),document.querySelector("#edit")),d=document.querySelector("#add"),_=document.getElementById("name"),h=document.getElementById("category"),m=document.querySelector(".profile__add-button"),p=(document.querySelector(".add__close"),document.querySelector(".add")),E=(document.getElementById("addForm"),document.querySelector(".form__button"),{formSelector:".form",inputSelector:".form__input",fieldsetSelector:".form__fieldset",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}),y=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return o("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return o("".concat(this._baseUrl,"/me"),{headers:this._headers})}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"b451294b-44d9-464a-8874-2d4137a4eb3c","Content-Type":"application/json"}});y.getInitialCards().then((e=>{g.renderItems(e)})).catch((e=>{console.log(e)})),y.getUserInfo().then((e=>{L.setUserInfo({name:e.name,description:e.about})})).then((e=>{L.setUserImage({picture:e.avatar})})).catch((e=>{console.log(e)}));const g=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.prepend(t)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}}({items:[{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){return new t(e,"#card",(()=>{b.open(e.title,e.link)})).generateCard()}},".grid__cards");g.renderItems();const v=new i(u,(e=>{L.setUserInfo(e.name,e.description),v.close()}));v.setEventListeners();const f=new i(d,(e=>{const t={title:e.title,link:e.link};g.addItem(t),f.close()}));f.setEventListeners();const b=new class extends r{constructor(e){super(e),this._imageTitle=this._popupElement.querySelector(".image__title"),this._imagePreview=this._popupElement.querySelector(".image__file")}open(e,t){super.open(),this._imagePreview.src=t,this._imagePreview.alt=e,this._imageTitle.textContent=e}}(l);b.setEventListeners();const L=new class{constructor(e){let{fullName:t,category:s,profilePic:n}=e;this._fullName=document.querySelector(t),this._category=document.querySelector(s),this._profilePic=document.querySelector(n)}getUserInfo(){return{name:this._fullName.textContent,description:this._category.textContent,picture:this._profilePic.src}}setUserInfo(e,t){this._fullName.textContent=e,this._category.textContent=t}setUserImage(e){this._profilePic.src=e}}({fullName:".profile__name",category:".profile__category",profilePic:".profile__picture"});a.addEventListener("click",(function(){const e=L.getUserInfo();_.value=e.name,h.value=e.description,S.resetValidationError(),v.open()})),m.addEventListener("click",(()=>{C.resetValidationError(),f.open()}));const S=new n(E,c),C=new n(E,p);S.enableValidation(),C.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cEltYWdlLmpzIiwid2VicGFjazovL3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19jYXJkXCIpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgY2FyZEltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xyXG4gICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvL2xpa2UgaGFuZGxlclxyXG4gICAgY29uc3QgY2FyZExpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcclxuICAgIGNhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9wcmVzc0xpa2UpO1xyXG5cclxuICAgIC8vZGVsZXRlIGhhbmRsZXJcclxuICAgIGNvbnN0IGNhcmREZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpO1xyXG4gICAgY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fcHJlc3NEZWxldGUpO1xyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL19oYW5kbGVDYXJkQ2xpY2sgPSAoKSA9PiB7XHJcbiAgIC8vIHRoaXMuUG9wdXBJbWFnZVxyXG4gLy8gfVxyXG5cclxuICBfcHJlc3NMaWtlID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgfTtcclxuXHJcbiAgX3ByZXNzRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9maWVsZHNldFNlbGVjdG9yID0gY29uZmlnLmZpZWxkc2V0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uRXJyb3IoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImV4cG9ydCBjbGFzcyBQb3B1cHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpe1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlTGF5b3ZlckNsb3NlID0gdGhpcy5faGFuZGxlTGF5b3ZlckNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVMYXlvdmVyQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZShldnQudGFyZ2V0KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9lbmFibGVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTGF5b3ZlckNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9lbmFibGVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTGF5b3ZlckNsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0pO1xyXG5cclxuXHJcbn1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50LCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xyXG5cclxuXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGtleSA9IGlucHV0LmlkO1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICBpbnB1dHNba2V5XSA9IHZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKClcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KClcclxufVxyXG5cclxufSIsImNvbnN0IGZldGNoZXIgPSAodXJsLCBoZWFkZXIpID0+IHtcclxuICAgIGZldGNoKHVybCxoZWFkZXIpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSk7XHJcbiAgfSBcclxuXHJcbiAgZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgaGVhZGVyc30pe1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfTtcclxuICAgIGdldEluaXRpYWxDYXJkcygpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaGVyKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGdldFVzZXJJbmZvKCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoZXIoYCR7dGhpcy5fYmFzZVVybH0vbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuIiwiLy9pbml0aWFsIGltYWdlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxhdGVtYXJcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICAgIH0sXHJcbiAgXTtcclxuICBcclxuLy9wcm9maWxlIGNvbnN0c1xyXG5cclxuZXhwb3J0IGNvbnN0IGZ1bGxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2NhdGVnb3J5XCIpO1xyXG5cclxuLy9pbWFnZSBjb25zdHNcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpbmtcIik7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19jYXJkc1wiKTtcclxuXHJcbi8vcHJvZmlsZSBmb3JtIGNvbnN0c1xyXG5cclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0X19jbG9zZVwiKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0Rm9ybVwiKTtcclxuXHJcbi8vcG9wdXAgZm9ybSBjb25zdHNcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQnKTtcclxuXHJcbi8vaW5wdXRzXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2F0ZWdvcnlcIik7XHJcblxyXG4vLyBpbWFnZSBmb3JtIGNvbnN0c1xyXG5leHBvcnQgY29uc3QgYnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZF9fY2xvc2VcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkRm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcclxuXHJcbi8vdmFsaWRhdGlvbiBjb25zdHNcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gICAgZmllbGRzZXRTZWxlY3RvcjogXCIuZm9ybV9fZmllbGRzZXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICB9OyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBGb3JtIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cEZvcm0uanNcIjtcclxuXHJcbmltcG9ydCB7IFBvcHVwSW1hZ2UgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwSW1hZ2UuanNcIjtcclxuXHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGZvcm1Db25maWcsXHJcbiAgZm9ybUFkZCxcclxuICBmb3JtRWRpdCxcclxuICBhZGRQb3B1cEVsZW1lbnQsXHJcbiAgYWRkRm9ybUVsZW1lbnQsXHJcbiAgZWRpdEZvcm1FbGVtZW50LFxyXG4gIGVkaXRQb3B1cEVsZW1lbnQsXHJcbiAgYnV0dG9uQWRkLFxyXG4gIGJ1dHRvbkVkaXQsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGpvYklucHV0LFxyXG4gIHBvcHVwSW1hZ2UsXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vL2luaXRpYWxpemluZyBhcGlcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYjQ1MTI5NGItNDRkOS00NjRhLTg4NzQtMmQ0MTM3YTRlYjNjXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7XHJcblxyXG4vL2dldHRpbmcgaW5pdGlhbCBjYXJkc1xyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbi50aGVuKChyZXMpID0+IHtcclxuICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhyZXMpO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn0pXHJcblxyXG4vL2dldHRpbmcgdXNlciBpbmZvXHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKVxyXG4udGhlbigocmVzKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgbmFtZTogcmVzLm5hbWUsIGRlc2NyaXB0aW9uOiByZXMuYWJvdXRcclxuICB9KVxyXG59KVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbWFnZSh7XHJcbiAgICAgIHBpY3R1cmU6IHJlcy5hdmF0YXJcclxuICAgIH0pXHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KVxyXG5cclxuXHJcbi8vc3VibWl0dGluZyBjYXJkXHJcblxyXG5jb25zdCBzdWJtaXRDYXJkID0gKGRhdGEpID0+IHtcclxuXHJcbmNvbnN0IG5ld0ltYWdlID0ge1xyXG4gIHRpdGxlOiBkYXRhWyd0aXRsZSddLFxyXG4gIGxpbms6IGRhdGFbJ2xpbmsnXVxyXG59O1xyXG5jYXJkTGlzdC5hZGRJdGVtKG5ld0ltYWdlKTtcclxuXHJcbmNhcmRGb3JtLmNsb3NlKCk7XHJcblxyXG59XHJcblxyXG4vL3N1Ym1pdHRpbmcgcHJvZmlsZVxyXG5cclxuY29uc3Qgc3VibWl0UHJvZmlsZSA9IChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmRlc2NyaXB0aW9uKVxyXG5cclxuICBwcm9maWxlRm9ybS5jbG9zZSgpXHJcbn1cclxuXHJcbi8vZGlzcGxheWluZyBjYXJkcyBpbiBnYWxsZXJ5XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLmdyaWRfX2NhcmRzXCJcclxuKTtcclxuXHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vL3VzZXIgaW5mbyBzZWN0aW9uXHJcblxyXG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cEZvcm0oZWRpdFBvcHVwRWxlbWVudCwgc3VibWl0UHJvZmlsZSlcclxucHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vY2FyZCBzZWN0aW9uXHJcblxyXG5jb25zdCBjYXJkRm9ybSA9IG5ldyBQb3B1cEZvcm0oYWRkUG9wdXBFbGVtZW50LCBzdWJtaXRDYXJkKVxyXG5jYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9pbWFnZSBzZWN0aW9uXHJcblxyXG5jb25zdCBpbWFnZU1vZHVsZSA9IG5ldyBQb3B1cEltYWdlKHBvcHVwSW1hZ2UpO1xyXG5pbWFnZU1vZHVsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbi8vYWRkaW5nIGNhcmQgdG8gZ2FsbGVyeVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkKSB7XHJcbiAgY29uc3QgaW1hZ2UgPSBuZXcgQ2FyZChjYXJkLCBcIiNjYXJkXCIsICgpID0+IHtcclxuICAgIGltYWdlTW9kdWxlLm9wZW4oY2FyZC50aXRsZSwgY2FyZC5saW5rKTtcclxuICB9KTtcclxuICByZXR1cm4gaW1hZ2UuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcblxyXG4vL2dldHRpbmcgdGhlIGN1cnJlbnQgdXNlciBpbmZvXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgZnVsbE5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBjYXRlZ29yeTogXCIucHJvZmlsZV9fY2F0ZWdvcnlcIixcclxuICBwcm9maWxlUGljOiBcIi5wcm9maWxlX19waWN0dXJlXCJcclxufSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJQcm9maWxlKCl7XHJcbiAgY29uc3QgcHJvZmlsZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGUubmFtZVxyXG4gIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZS5kZXNjcmlwdGlvbjtcclxuICBcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb25FcnJvcigpO1xyXG4gIHByb2ZpbGVGb3JtLm9wZW4oKTtcclxufVxyXG5cclxuXHJcbi8vaGFuZGxlcnNcclxuXHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbmRlclByb2ZpbGUpO1xyXG5cclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb25FcnJvcigpO1xyXG4gIGNhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5cclxuLy92YWxpZGF0b3Igc2V0dGluZ3NcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUVkaXQpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUFkZCk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gaW5zZXJ0cyBlbGVtZW50IHRvIHRoZSBjb250YWluZXJcclxuICBhZGRJdGVtKGRhdGEpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihkYXRhKVxyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcclxuICB9O1xyXG5cclxuICAvLyByZW5kZXJzIGluaXRpYWwgaXRlbXNcclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKGRhdGEpXHJcbiAgICB9KVxyXG4gIH07XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBJbWFnZSBleHRlbmRzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KXtcclxuICAgICAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2VfX3RpdGxlXCIpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlX19maWxlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4odGl0bGUsIGxpbmspe1xyXG4gICAgXHJcbiAgICAgICAgc3VwZXIub3BlbigpXHJcbiAgICB0aGlzLl9pbWFnZVByZXZpZXcuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlUHJldmlldy5hbHQgPSB0aXRsZTtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHJcbiBcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGZ1bGxOYW1lLCBjYXRlZ29yeSwgcHJvZmlsZVBpYyB9KSB7XHJcbiAgICAgIHRoaXMuX2Z1bGxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihmdWxsTmFtZSk7XHJcbiAgICAgIHRoaXMuX2NhdGVnb3J5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXRlZ29yeSk7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVQaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVQaWMpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5fZnVsbE5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2NhdGVnb3J5LnRleHRDb250ZW50LFxyXG4gICAgICAgIHBpY3R1cmU6IHRoaXMuX3Byb2ZpbGVQaWMuc3JjXHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIHNldFVzZXJJbmZvKCBuYW1lLCBkZXNjcmlwdGlvbiApIHtcclxuICAgICAgdGhpcy5fZnVsbE5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICB0aGlzLl9jYXRlZ29yeS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbWFnZShwaWN0dXJlKXtcclxuICAgICAgdGhpcy5fcHJvZmlsZVBpYy5zcmMgPSBwaWN0dXJlO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJldnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ0aGlzIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3ByZXNzTGlrZSIsIl9wcmVzc0RlbGV0ZSIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9maWVsZHNldFNlbGVjdG9yIiwiZmllbGRzZXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzZXRWYWxpZGF0aW9uRXJyb3IiLCJmb3JFYWNoIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwic29tZSIsInByZXZlbnREZWZhdWx0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwRWxlbWVudCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUxheW92ZXJDbG9zZSIsImtleSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb250YWlucyIsIlBvcHVwRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1FbGVtZW50IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXQiLCJ2YWx1ZSIsImUiLCJzZXRJbnB1dFZhbHVlcyIsIl9pbnB1dHMiLCJuYW1lIiwicmVzZXQiLCJmZXRjaGVyIiwidXJsIiwiaGVhZGVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInBvcHVwSW1hZ2UiLCJidXR0b25FZGl0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JtRWRpdCIsImVkaXRQb3B1cEVsZW1lbnQiLCJhZGRQb3B1cEVsZW1lbnQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImJ1dHRvbkFkZCIsImZvcm1BZGQiLCJmb3JtQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImFib3V0Iiwic2V0VXNlckltYWdlIiwicGljdHVyZSIsImF2YXRhciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkIiwiaW1hZ2VNb2R1bGUiLCJwcm9maWxlRm9ybSIsImNhcmRGb3JtIiwibmV3SW1hZ2UiLCJfaW1hZ2VUaXRsZSIsIl9pbWFnZVByZXZpZXciLCJzcmMiLCJhbHQiLCJmdWxsTmFtZSIsImNhdGVnb3J5IiwicHJvZmlsZVBpYyIsIl9mdWxsTmFtZSIsIl9jYXRlZ29yeSIsIl9wcm9maWxlUGljIiwicHJvZmlsZSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9